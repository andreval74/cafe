<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Transferir Propriedade do Contrato</title>
  <link rel="stylesheet" href="..\css\styles.css" />
</head>
<body>
  <div class="container">
    <h1>Transfer√™ncia de Propriedade</h1>

    <label for="contract">üìÑ Endere√ßo do Contrato:</label>
    <input type="text" id="contract" placeholder="Ex: 0x..." />

    <label for="newOwner">üë§ Novo Dono (carteira):</label>
    <input type="text" id="newOwner" placeholder="Ex: 0x..." />

    <button onclick="transferOwnership()">Transferir Controle</button>

    <pre id="status">Aguardando a√ß√£o...</pre>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script>
    const abi = [
      "function transferOwnership(address newOwner)"
    ];

    async function transferOwnership() {
      const status = document.getElementById("status");
      const contractAddress = document.getElementById("contract").value.trim();
      const newOwner = document.getElementById("newOwner").value.trim();

      if (!ethers.utils.isAddress(contractAddress)) {
        alert("‚ö†Ô∏è Endere√ßo do contrato inv√°lido");
        return;
      }

      if (!ethers.utils.isAddress(newOwner)) {
        alert("‚ö†Ô∏è Endere√ßo do novo dono inv√°lido");
        return;
      }

      try {
        const provider = new ethers.providers.Web3Provider(window.ethereum);
        await provider.send("eth_requestAccounts", []);
        const signer = provider.getSigner();
        const contrato = new ethers.Contract(contractAddress, abi, signer);

        status.textContent = "‚è≥ Transferindo propriedade do contrato...";
        const tx = await contrato.transferOwnership(newOwner);
        await tx.wait();
        status.textContent = "‚úÖ Propriedade transferida com sucesso!";
      } catch (err) {
        console.error(err);
        status.textContent = "‚ùå Erro ao transferir controle.";
      }
    }
  </script>
</body>
</html>
