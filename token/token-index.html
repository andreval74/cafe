<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema Linear de Tokens - EIP-1167 + CREATE2</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸš€</text></svg>">
  <link rel="stylesheet" href="token-style.css">
</head>
<body>
  <div class="main-container">
    <div class="header">
      <h1>ğŸš€ Sistema Linear de Tokens</h1>
      <p>Fluxo guiado para criaÃ§Ã£o de tokens com EIP-1167 + CREATE2</p>
    </div>
    <div class="progress-container">
      <div class="progress-steps">
        <div class="step active" id="step-indicator-1"><div class="step-circle">1</div><div class="step-line"></div></div>
        <div class="step" id="step-indicator-2"><div class="step-circle">2</div><div class="step-line"></div></div>
        <div class="step" id="step-indicator-3"><div class="step-circle">3</div><div class="step-line"></div></div>
        <div class="step" id="step-indicator-4"><div class="step-circle">4</div><div class="step-line"></div></div>
        <div class="step" id="step-indicator-5"><div class="step-circle">5</div></div>
      </div>
      <div class="step-labels">
        <div class="step-label">Dados BÃ¡sicos</div>
        <div class="step-label">PersonalizaÃ§Ã£o</div>
        <div class="step-label">Resumo</div>
        <div class="step-label">Deploy</div>
        <div class="step-label">MetaMask</div>
      </div>
    </div>
    <div class="content">
      <div class="step-content active" id="step-1">
        <h2 class="step-title">ğŸ“ Dados BÃ¡sicos do Token</h2>
        <p class="step-description">Conecte sua carteira para preencher automaticamente o proprietÃ¡rio e a rede.<br>Preencha as informaÃ§Ãµes do seu token.</p>
        <div class="form-row">
          <div class="form-group">
            <label for="tokenName">ğŸ“ Nome do Token</label>
            <input type="text" id="tokenName" placeholder="Ex: BitcoinBR" required>
          </div>
          <div class="form-group">
            <label for="tokenSymbol">ğŸ·ï¸ SÃ­mbolo do Token</label>
            <input type="text" id="tokenSymbol" placeholder="Ex: BTCBR" required>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="decimals">ğŸ”¢ Decimais</label>
            <input type="number" id="decimals" placeholder="18" value="18" min="0" max="18" required>
          </div>
          <div class="form-group">
            <label for="totalSupply">ğŸ’° Total Supply</label>
            <input type="text" id="totalSupply" placeholder="Ex: 1000000" required>
          </div>
        </div>
        <div class="form-group">
          <label for="ownerAddress">ğŸ‘¤ EndereÃ§o do ProprietÃ¡rio</label>
          <input type="text" id="ownerAddress" placeholder="Conecte sua carteira" required readonly>
        </div>
        <div class="form-group">
          <label>ğŸ”— Rede conectada</label>
          <input type="text" id="networkDisplay" readonly>
        </div>
        <div class="form-group">
          <label for="tokenImage">ğŸ–¼ï¸ URL da Imagem do Token</label>
          <input type="url" id="tokenImage" placeholder="https://exemplo.com/logo.png">
        </div>
        <div class="navigation">
          <button id="connect-metamask-btn" type="button">Conectar MetaMask</button>
          <div id="connected-wallet-info" style="display:none;color:#16924b;margin-top:1em;font-size:.98em;">Carteira conectada e rede detectada!</div>
          <button id="next-step-1">â¡ï¸ PrÃ³ximo: PersonalizaÃ§Ã£o</button>

        </div>
      </div>
      <div class="step-content" id="step-2">
        <h2 class="step-title">ğŸ¯ PersonalizaÃ§Ã£o do EndereÃ§o</h2>
        <p class="step-description">Escolha se deseja personalizar o endereÃ§o do seu token ou usar um endereÃ§o padrÃ£o.</p>
        <div class="info-box">
          <h3>ğŸ’¡ OpÃ§Ãµes DisponÃ­veis</h3>
          <p>
            <label>
              <input type="radio" name="tipo-contrato" id="contrato-simples" checked onchange="toggleAddressCustomization()">
              Contrato Simples (EndereÃ§o padrÃ£o)
            </label>
            <br>
            <label>
              <input type="radio" name="tipo-contrato" id="contrato-personalizado" onchange="toggleAddressCustomization()">
              Contrato com EndereÃ§o Personalizado (CREATE2)
            </label>
          </p>
          <p><strong>EndereÃ§o Personalizado:</strong> Use CREATE2 para gerar um endereÃ§o com os Ãºltimos 4 caracteres de sua escolha. Custa um pouco mais de gas, mas oferece um endereÃ§o memorÃ¡vel.</p>
          <p><strong>EndereÃ§o PadrÃ£o:</strong> Use CREATE normal para um deploy mais rÃ¡pido e barato, mas com endereÃ§o aleatÃ³rio.</p>
        </div>
        <div id="customization-section" style="display: none;">
          <div class="form-group">
            <label for="targetSuffix">ğŸ¯ Ãšltimos 4 caracteres desejados (hex)</label>
            <input type="text" id="targetSuffix" maxlength="4" placeholder="Ex: cafe" pattern="[0-9a-fA-F]{4}">
          </div>
          <div class="form-group">
            <label for="predictedAddress">ğŸ“ EndereÃ§o Previsto</label>
            <input type="text" id="predictedAddress" placeholder="SerÃ¡ calculado automaticamente" readonly>
          </div>
          <div class="form-group">
            <label for="saltFound">ğŸ”¢ SALT Encontrado</label>
            <input type="text" id="saltFound" placeholder="SerÃ¡ gerado automaticamente" readonly>
          </div>
          <button onclick="buscarSalt()" id="search-salt-btn">ğŸ” Buscar SALT</button>
          <button onclick="pararBusca()" id="stop-search-btn" style="display:none;" class="btn-secondary">â¹ï¸ Parar Busca</button>
          <div id="salt-progress" class="progress-bar-container" style="display:none;">
            <div id="salt-progress-bar" class="progress-bar"></div>
          </div>
          <div id="salt-output" class="output" style="display:none;">// O resultado da busca serÃ¡ exibido aqui...</div>
        </div>
        <div class="navigation">
          <button class="btn-secondary">â¬…ï¸ Voltar</button>
          <button id="next-step-2">â¡ï¸ PrÃ³ximo: Resumo</button>
        </div>
      </div>
      <div class="step-content" id="step-3">
        <h2 class="step-title">ğŸ“‹ Resumo</h2>
        <p class="step-description">Revise os dados antes do deploy.</p>
        <div class="info-box">
          <h3>ğŸ“‹ Resumo do Token</h3>
          <div id="token-summary">
          </div>
        </div>
        <div class="navigation">
          <button class="btn-secondary">â¬…ï¸ Voltar</button>
          <button id="next-step-3">â¡ï¸ PrÃ³ximo: Deploy</button>
        </div>
      </div>
      <div class="step-content" id="step-4">
        <h2 class="step-title">ğŸš€ Deploy do Token</h2>
        <p class="step-description">Compile e faÃ§a o deploy do seu token na blockchain.</p>
      <div class="token-deploy-actions">
        <button id="btn-salvar-contrato" class="btn-success">ğŸ“„ Gerar Contrato (.sol)</button>
        <button id="btn-compilar-contrato" class="btn-success" disabled>ğŸ› ï¸ Compilar</button>
        <button id="btn-deploy-contrato" class="btn-success" disabled>ğŸš€ Deploy Token</button>
    </div>
    <div id="compile-status"></div>
    <div id="deploy-status"></div>
    <div class="navigation">
      <button class="btn-secondary">â¬…ï¸ Voltar</button>
      <button id="next-step-4" style="display: none;">â¡ï¸ PrÃ³ximo: MetaMask</button>
    </div>
      </div>
      <div class="step-content" id="step-5">
        <h2 class="step-title">ğŸ¦Š Adicionar ao MetaMask</h2>
        <p class="step-description">Seu token foi criado com sucesso! Agora adicione-o ao MetaMask para visualizar e gerenciar.</p>
        <div class="info-box">
          <h3>âœ… Token Criado com Sucesso!</h3>
          <p>Seu token foi deployado na blockchain. Clique no botÃ£o abaixo para adicionÃ¡-lo automaticamente ao MetaMask.</p>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>ğŸ“ EndereÃ§o do Token</label>
            <input type="text" id="final-token-address" readonly>
          </div>
          <div class="form-group">
            <label>ğŸ·ï¸ SÃ­mbolo</label>
            <input type="text" id="final-token-symbol" readonly>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>ğŸ”¢ Decimais</label>
            <input type="number" id="final-token-decimals" readonly>
          </div>
          <div class="form-group">
            <label>ğŸ–¼ï¸ Imagem</label>
            <input type="text" id="final-token-image" readonly>
          </div>
        </div>
        <button onclick="adicionarTokenMetaMask()" class="btn-success">â• Adicionar no MetaMask</button>
        <div id="metamask-status"></div>
        <div class="navigation">
          <button onclick="prevStep()" class="btn-secondary">â¬…ï¸ Voltar</button>
          <button onclick="reiniciarFluxo()" class="btn-success">ğŸ”„ Criar Outro Token</button>
        </div>
      </div>
    </div>
  </div>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>